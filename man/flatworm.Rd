% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flatworm.R
\name{flatworm}
\alias{flatworm}
\alias{flatworm.data.frame}
\alias{flatworm.lm}
\alias{flatworm.map}
\alias{flatworm.map2stan}
\title{Flatworm plot for normalized quantile residuals}
\usage{
flatworm(object, ...)

\method{flatworm}{lm}(object, cols = NULL, ...)

\method{flatworm}{map}(object, cols = NULL, y = NULL, ...)

\method{flatworm}{map2stan}(object, cols = NULL, y = NULL, ...)

\method{flatworm}{data.frame}(object, residual_z, cols = NULL, ylim = 6,
  points = TRUE, lines = FALSE, loess = TRUE, cubic = FALSE,
  z_cubic = FALSE, ...)
}
\arguments{
\item{object}{The object to generate diagnostics from, such as a model (for
\code{flatworm.lm}, \code{flatworm.map}, ...) or a data frame of residuals
(for \code{flatworm.data.frame}).}

\item{...}{Additional arguments passed onto \code{flatworm.data.frame} by
model-specific versions of \code{flatworm}.

Flatworm implements a variant of a worm plot (See e.g. \code{\link[gamlss]{wp}}). 
Unlike the traditional worm plot, its x-axis is scaled in units of standard
errors. Thus the arcs that define ~ +-2 SE in a worm plot (the region most
residuals should be within) instead define a band, making it a more straightforward
task to judge whether the residuals are contained within +- 2 SE.

Model-specific versions of \code{flatworm} simply extract data and normalized
residuals from a model and then pass them to \code{flatworm.data.frame}.}

\item{cols}{Bare (unquoted) name of a column to facet over for generating 
multiple flatworm plots (i.e. small multiples). If cols is numeric, it
will be split into quartiles; if is it a factor, into levels.}

\item{y}{\code{map2stan} and \code{map} objects may contain multiple dependent
variables; use \code{y} (as an unquoted expression) to specify the desired
response to calculate residuals from (or \code{NULL} to use the first
link function in the model).}

\item{residual_z}{Bare name of the normalized residuals in \code{object}.}

\item{ylim}{Limits of the y axis to plot. If a numeric vector of length 2, specifies
min and max. If numeric vector of length 1, specifies abs(min) and max. If
\code{NA} or \code{NULL}, the y limits are determined from the data.}

\item{points}{Show residuals as points}

\item{lines}{Show residuals as lines}

\item{loess}{Show a \code{\link{loess}} fit to detrended residuals.}

\item{cubic}{Show a cubic fit to detrended residuals.}

\item{z_cubic}{Show a cubic fit to detrended residuals in z-space, translated onto the
SE scale used by flatworm. This is the same fit used by \code{\link[gamlss]{wp}}
displayed on the transformed y scale used by \code{flatworm}.}
}
\description{
Generates a flattened version of a detrended normal Q-Q plot (a worm plot)
for regression diagnostics.
}
\seealso{
\code{\link[gamlss]{wp}}
}

